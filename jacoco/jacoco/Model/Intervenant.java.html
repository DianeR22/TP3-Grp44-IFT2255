<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="fr"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Intervenant.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Implementation</a> &gt; <a href="index.source.html" class="el_package">Model</a> &gt; <span class="el_source">Intervenant.java</span></div><h1>Intervenant.java</h1><pre class="source lang-java linenums">package Model;
import java.util.List;
import java.util.Scanner;

/**
 * La classe Intervenant représente un utilisateur du système.
 * Elle hérite de la classe Utilisateur et possède des fonctionnalités liées à l'inscription,
 * la connexion, et la gestion d'informations des intervenants.
 */
public class Intervenant extends Utilisateur {
    // // Attributs spécifiques à l'intervenant
    private String type;
    private String identifiantVille;
    private Intervenant intervenant;

    // Variable statique pour l'intervenant connecté
    private static Intervenant intervenantConnecte;

    /**
     * Constructeur de la classe Intervenant avec des paramètres pour initialiser les attributs.
     *
     * @param nom Le nom de l'intervenant.
     * @param prenom Le prénom de l'intervenant.
     * @param adresseCourriel L'adresse e-mail de l'intervenant.
     * @param motDePasse Le mot de passe de l'intervenant.
     * @param type Le type de l'intervenant (Public, Privé, Individu).
     * @param identifiantVille L'identifiant de la ville de l'intervenant.
     */
    public Intervenant(String nom, String prenom, String adresseCourriel, String motDePasse, String type, String identifiantVille) {
<span class="nc" id="L30">        super(nom, prenom, motDePasse, adresseCourriel);</span>
<span class="nc" id="L31">        this.type = type;</span>
<span class="nc" id="L32">        this.identifiantVille = identifiantVille;</span>
<span class="nc" id="L33">    }</span>

    /**
     * Constructeur sans arguments pour créer un intervenant sans initialisation.
     */
<span class="nc" id="L38">    public Intervenant() {</span>

<span class="nc" id="L40">    }</span>

    /**
     * Vérifie l'égalité de l'intervenant avec un autre objet en utilisant l'adresse courriel.
     *
     * @param obj L'objet à comparer.
     * @return true si les deux objets sont égaux, false sinon.
     */
    @Override
    public boolean equals(Object obj) {
        // Vérifie si ces objets sont identiques
<span class="nc bnc" id="L51" title="All 2 branches missed.">        if (this == obj) {</span>
<span class="nc" id="L52">            return true;</span>
        }
        // Vérifie si ces objets appartiennent à la même classe
<span class="nc bnc" id="L55" title="All 4 branches missed.">        if (obj == null || getClass() != obj.getClass()) {</span>
<span class="nc" id="L56">            return false;</span>
        }
        // Vérifie si ces objets ont la même adresse courriel
<span class="nc" id="L59">        Intervenant intervenant = (Intervenant) obj;</span>
<span class="nc bnc" id="L60" title="All 4 branches missed.">        return this.adresseCourriel != null &amp;&amp; this.adresseCourriel.equals(intervenant.adresseCourriel);</span>
    }

    /**
     * Génère un code de hachage basé sur l'adresse courriel pour garantir une cohérence avec
     * la méthode equals.
     *
     * @return Le code de hachage de l'adresse courriel.
     */
    @Override
    public int hashCode() {
<span class="nc bnc" id="L71" title="All 2 branches missed.">        return adresseCourriel != null ? adresseCourriel.hashCode() : 0;</span>
    }

    // Getter et setter
    /**
     * Retourne le type de l'intervenant.
     *
     * @return Le type de l'intervenant (par exemple, &quot;Public&quot;, &quot;Privé&quot;, ou &quot;Individu&quot;).
     */
    public String getType() {
<span class="nc" id="L81">        return type;</span>
    }

    /**
     * Définit le type de l'intervenant.
     * @param type Le type à attribuer à l'intervenant.
     */
    public void setType(String type) {
<span class="nc" id="L89">        this.type = type;</span>
<span class="nc" id="L90">    }</span>


    /**
     * Retourne l'identifiant de la ville de l'intervenant.
     *
     * @return L'identifiant de la ville (code à 8 chiffres).
     */
    public String getIdentifiantVille() {
<span class="nc" id="L99">        return identifiantVille;</span>
    }

    /**
     * Définit l'identifiant de la ville de l'intervenant.
     *
     * @param identifiantVille L'identifiant de la ville (code à 8 chiffres).
     */
    public void setIdentifiantVille(String identifiantVille) {
<span class="nc" id="L108">        this.identifiantVille = identifiantVille;</span>
<span class="nc" id="L109">    }</span>

    /**
     * Retourne l'intervenant actuel.
     *
     * @return L'objet Intervenant correspondant à l'intervenant actuel.
     */
    public Intervenant getIntervenant() {
<span class="nc" id="L117">        return intervenant;</span>
    }

    /**
     * Définit l'intervenant actuel.
     *
     * @param intervenant L'intervenant à définir comme l'intervenant
     */
    public void setIntervenant(Intervenant intervenant) {
<span class="nc" id="L126">        this.intervenant = intervenant;</span>
<span class="nc" id="L127">    }</span>

    /**
     * Retourne l'intervenant connecté.
     *
     * @return L'intervenant actuellement connecté
     */
    public static Intervenant getIntervenantConnecte() {
<span class="nc" id="L135">        return intervenantConnecte;</span>
    }

    /**
     * Définit l'intervenant connecté.
     *
     * @param intervenant L'intervenant à définir comme celui qui est connecté.
     */
    public static void setIntervenantConnecte(Intervenant intervenant) {
<span class="nc" id="L144">        Intervenant.intervenantConnecte = intervenant;</span>
<span class="nc" id="L145">    }</span>

    /**
     * Cette méthode permet de connecter un intervenant en vérifiant son adresse e-mail
     * par rapport aux intervenants inscrits dans le système. Elle permet de trouver
     * l'intervenant connecté et d'avoir une variable intervenantConnecte
     * utile pour associer une candidature à l'intervenant par exemple.
     *
     * @param utilisateur L'utilisateur qui se connecte.
     * @param email L'adresse e-mail de l'intervenant.
     * @return L'intervenant trouvé si l'adresse e-mail est valide, sinon null.
     */
    public static Intervenant connecterIntervenant(Utilisateur utilisateur, String email) {
        // Prendre la liste des intervenants depuis le fichier JSON
<span class="nc" id="L159">        List&lt;Intervenant&gt; intervenants = GestionIntervenants.chargerIntervenantsDepuisFichier();</span>

        // Chercher l'intervenant avec l'email donné
<span class="nc bnc" id="L162" title="All 2 branches missed.">        for (Intervenant intervenant : intervenants) {</span>
<span class="nc bnc" id="L163" title="All 2 branches missed.">            if (intervenant.getAdresseCourriel().equals(email)) {</span>
                // Intervenant trouvé est l'intervenant présentement connecté
<span class="nc" id="L165">                intervenantConnecte = intervenant;</span>
<span class="nc" id="L166">                return intervenant;</span>
            }
<span class="nc" id="L168">        }</span>
<span class="nc" id="L169">        return null;</span>
    }

    public static void deconnecterResident() {
<span class="nc" id="L173">        intervenantConnecte = null; // Déconnecte le résident</span>
<span class="nc" id="L174">    }</span>

    /**
     * La méthode d'inscription permet à un intervenant de s'inscrire en collectant
     * ses informations et en les enregistrant dans le système.
     *
     * @param utilisateur L'utilisateur qui s'inscrit.
     */
    @Override
    public void inscription(Utilisateur utilisateur) {
        // Initialisation d'un scanner afin d'obtenir l'input de l'intervenant
<span class="nc" id="L185">        Scanner scanner = new Scanner(System.in);</span>

        // Nom et prénom de l'intervenant
<span class="nc" id="L188">        nom = obtenirNom(&quot;Nom&quot;);</span>
<span class="nc" id="L189">        prenom = obtenirNom(&quot;Prénom&quot;);</span>

        // L'adresse courriel est entrée par le résident et est validée
<span class="nc" id="L192">        adresseCourriel = obtenirEmail();</span>

        // Le mot de passe est entrée par l'utilisateur. Il doit contenir un minimum
        // de 8 caractères, une majuscule, un chiffre et un caractère spécial
<span class="nc" id="L196">        motDePasse = obtenirMotDePasse();</span>

        // Le type de l'intervenant est entré et validé
<span class="nc" id="L199">        type = obtenirType();</span>

        // L'identifiant de la ville de l'intervenant est entré puis validé
<span class="nc" id="L202">        identifiantVille = obtenirIdentifiantVille();</span>

        // Ajouter le résident à la liste et sauvegarder
<span class="nc" id="L205">        GestionIntervenants.ajouterIntervenant(this);</span>

<span class="nc" id="L207">        System.out.println(&quot;Vous êtes inscrit!&quot;);</span>
<span class="nc" id="L208">        afficherInformations();</span>

        // Demander à l'intervenant s'il souhaite se connecter
<span class="nc" id="L211">        demanderConnexion(scanner, utilisateur);</span>
<span class="nc" id="L212">    }</span>

    /**
     * Permet de collecter un nom ou un prénom.
     *
     * @param type Le type (nom ou prénom) à collecter.
     * @return Le nom ou prénom entré par l'utilisateur.
     */
    private String obtenirNom(String type) {
<span class="nc" id="L221">        Scanner scanner = new Scanner(System.in);</span>
<span class="nc" id="L222">        System.out.println(&quot;Veuillez entrer votre &quot; + type + &quot;.&quot;);</span>
<span class="nc" id="L223">        return scanner.nextLine();</span>
    }

    /**
     * Permet de collecter et valider l'adresse e-mail de l'intervenant.
     *
     * @return L'adresse e-mail valide.
     */
    private String obtenirEmail() {
<span class="nc" id="L232">        Scanner scanner = new Scanner(System.in);</span>
        while(true) {
<span class="nc" id="L234">            System.out.println(&quot;Veuillez entrer votre adresse courriel.&quot;);</span>
<span class="nc" id="L235">            String adresseCourriel = scanner.nextLine();</span>
<span class="nc bnc" id="L236" title="All 2 branches missed.">            if (Valider.validerEmail(adresseCourriel)) {</span>
<span class="nc" id="L237">                return adresseCourriel;</span>
            } else {
<span class="nc" id="L239">                System.out.println(&quot;Adresse email invalide.&quot;);</span>
            }
<span class="nc" id="L241">        }</span>
    }

    /**
     * Permet de collecter et valider le mot de passe de l'intervenant
     * et de procéder à la validation de celui-ci.
     *
     * @return Le mot de passe valide.
     */
    private String obtenirMotDePasse() {
<span class="nc" id="L251">        Scanner scanner = new Scanner(System.in);</span>
        while(true) {
<span class="nc" id="L253">            System.out.println(&quot;Veuillez entrer votre mot de passe.&quot;);</span>
<span class="nc" id="L254">            String motDePasse = scanner.next();</span>
<span class="nc bnc" id="L255" title="All 2 branches missed.">            if (Valider.validerMDP(motDePasse)) {</span>
<span class="nc" id="L256">                return motDePasse;</span>
            } else {
<span class="nc" id="L258">                System.out.println(&quot;Mot de passe invalide.&quot;);</span>
            }
<span class="nc" id="L260">        }</span>
    }

    /**
     * Permet de collecter et valider le type d'intervenant.
     *
     * @return Le type d'intervenant valide.
     */
    private String obtenirType() {
<span class="nc" id="L269">        Scanner scanner = new Scanner(System.in);</span>
        while(true) {
<span class="nc" id="L271">            System.out.println(&quot;Veuillez entrer votre type (Public, Privé, Individu).&quot;);</span>
<span class="nc" id="L272">            String type = scanner.next();</span>
<span class="nc bnc" id="L273" title="All 6 branches missed.">            if (type.equalsIgnoreCase(&quot;Public&quot;) || type.equalsIgnoreCase(&quot;Privé&quot;) || type.equalsIgnoreCase(&quot;Individu&quot;)) {</span>
<span class="nc" id="L274">                return type;</span>
            } else {
<span class="nc" id="L276">                System.out.println(&quot;Type invalide.&quot;);</span>
            }
<span class="nc" id="L278">        }</span>
    }

    /**
     * Permet de collecter et valider l'identifiant de la ville de l'intervenant.
     *
     * @return L'identifiant de la ville valide.
     */
    private String obtenirIdentifiantVille() {
<span class="nc" id="L287">        Scanner scanner = new Scanner(System.in);</span>
        while(true) {
<span class="nc" id="L289">            System.out.println(&quot;Veuillez entrer l'identifiant de la ville (code à 8 chiffres).&quot;);</span>
<span class="nc" id="L290">            String identifiantVille = scanner.next();</span>
<span class="nc bnc" id="L291" title="All 2 branches missed.">            if (Valider.validerIdentifiantVille(identifiantVille)) {</span>
<span class="nc" id="L292">                return identifiantVille;</span>
            } else {
<span class="nc" id="L294">                System.out.println(&quot;Identifiant de la ville invalide.&quot;);</span>
            }
<span class="nc" id="L296">        }</span>
    }

    /**
     * Affiche les informations de l'intervenant après l'inscription.
     */
    private void afficherInformations() {
<span class="nc" id="L303">        System.out.println(&quot;\nInformations recueillies :&quot;);</span>
<span class="nc" id="L304">        System.out.println(&quot;Nom : &quot; + nom);</span>
<span class="nc" id="L305">        System.out.println(&quot;Prénom : &quot; + prenom);</span>
<span class="nc" id="L306">        System.out.println(&quot;Adresse e-mail : &quot; + adresseCourriel);</span>
<span class="nc" id="L307">        System.out.println(&quot;Type : &quot; + type);</span>
<span class="nc" id="L308">        System.out.println(&quot;Identifiant de la ville : &quot; + identifiantVille);</span>
<span class="nc" id="L309">    }</span>

    /**
     * Demande à l'intervenant s'il souhaite se connecter après inscription.
     *
     * @param scanner Le scanner utilisé pour lire la réponse.
     * @param utilisateur L'utilisateur qui s'inscrit.
     */
    private void demanderConnexion(Scanner scanner, Utilisateur utilisateur) {
<span class="nc" id="L318">        System.out.println(&quot;Merci pour vos informations! Souhaitez-vous vous connecter? (Oui/Non)&quot;);</span>
<span class="nc" id="L319">        String reponse = scanner.next();</span>
<span class="nc bnc" id="L320" title="All 2 branches missed.">        if (reponse.equalsIgnoreCase(&quot;Oui&quot;)) {</span>

<span class="nc" id="L322">            super.connexion(utilisateur);</span>
        } else {
<span class="nc" id="L324">            System.out.println(&quot;Au revoir.&quot;);</span>
<span class="nc" id="L325">            System.exit(0);</span>
        }
<span class="nc" id="L327">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>